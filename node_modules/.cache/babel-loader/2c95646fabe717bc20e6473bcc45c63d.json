{"remainingRequest":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/babel-loader/lib/index.js!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue","mtime":1581481380591},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2x2bWluZy9EZXNrdG9wL3dvcmsvcGVyc29uV29yay93ZWJhcHBCb29rL3dlaWJvc291cmNlL3dlaWJvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHRhYmJhciBmcm9tICdAL2NvbXBvbmVudHMvdGFiYmFyJzsKaW1wb3J0IGhlYWRlcmJhciBmcm9tICdAL2NvbXBvbmVudHMvaGVhZGVyYmFyJzsKaW1wb3J0IHBvc3QgZnJvbSAnQC9jb21wb25lbnRzL3Bvc3QnOwppbXBvcnQgc2Nyb2xsdmlldyBmcm9tICdAL2NvbXBvbmVudHMvc2Nyb2xsdmlldyc7CmltcG9ydCBzZXJ2aWNlIGZyb20gJ0AvdXRpbHMvc2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaW5kZXgnLAogIGNvbXBvbmVudHM6IHsKICAgIGhlYWRlcmJhcjogaGVhZGVyYmFyLAogICAgdGFiYmFyOiB0YWJiYXIsCiAgICBwb3N0OiBwb3N0LAogICAgc2Nyb2xsdmlldzogc2Nyb2xsdmlldwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzZW5kOiBmYWxzZSwKICAgICAgcmVhZHlUb0xvYWQ6IHRydWUsCiAgICAgIHBhZ2VJbmRleDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkYXRhTGlzdDogZnVuY3Rpb24gZGF0YUxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS53ZWlib0RhdGFMaXN0OyAvLyDku452dWV455qEc3RvcmXojrflj5bmlbDmja4KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5sb2FkQ2FsbGJhY2soKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRDYWxsYmFjazogZnVuY3Rpb24gbG9hZENhbGxiYWNrKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcCwgYXJyYXk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMi5wYWdlSW5kZXggPT0gMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyDliqDovb3liLDnrKzkuozpobXml7bvvIzlsLHnu5PmnZ/liqDovb3vvIzpu5jorqTlj6rmnIky6aG15pWw5o2uCiAgICAgICAgICAgICAgICBfdGhpczIuaXNlbmQgPSB0cnVlOyAvLyBpc2VuZD10cnVl6KGo56S65YGc5q2ic2Nyb2xsdmlld+eahOa7muWKqOWKoOi9veWKn+iDvQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3RoaXMyLnJlYWR5VG9Mb2FkID0gZmFsc2U7IC8vIHJlYWR5VG9Mb2Fk6KGo56S65Zyo5Y+R6YCBYWpheOivt+axgui/meauteaXtumXtOWGheS4jeinpuWPkeWIpOaWrea7muWKqOWIsOW6lemDqOeahOihjOS4ugoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldCgnanNvbi9saXN0JyArIChfdGhpczIucGFnZUluZGV4ICsgMSkgKyAnLmpzb24nKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLnJlYWR5VG9Mb2FkID0gdHJ1ZTsgLy8g6K+35rGC5Y+R6YCB5a6M5oiQ5ZCO77yM5Y+v5Lul5q2j5bi46Kem5Y+R5rua5Yqo5Yiw5bqV6YOo55qE6KGM5Li6CgogICAgICAgICAgICAgICAgYXJyYXkgPSByZXNwLmRhdGEuY2FyZHMgfHwgW107CgogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnc2V0V2VpYm9EYXRhTGlzdCcsIGFycmF5KTsgLy8g5bCG5Yqg6L2955qE5pWw5o2u5pS+5YWldnVleOS4re+8jOS+v+S6juWQjue7reeahOWPkeihqOWKn+iDveiBlOWKqAoKCiAgICAgICAgICAgICAgICBfdGhpczIucGFnZUluZGV4Kys7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAkBA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,SAAA,MAAA,wBAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AAEA,OAAA,OAAA,MAAA,iBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,MAAA,EAAA,MAFA;AAGA,IAAA,IAAA,EAAA,IAHA;AAIA,IAAA,UAAA,EAAA;AAJA,GAFA;AAQA,EAAA,IARA,kBAQA;AAEA,WAAA;AACA,MAAA,KAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GAfA;AAgBA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CADA,CACA;AACA;AAHA,GAhBA;AAqBA,EAAA,OArBA,qBAqBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,YAAA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,MAAA,CAAA,SAAA,IAAA,CADA;AAAA;AAAA;AAAA;;AACA;AACA,gBAAA,MAAA,CAAA,KAAA,GAAA,IAAA,CAFA,CAEA;;AAFA;;AAAA;AAKA,gBAAA,MAAA,CAAA,WAAA,GAAA,KAAA,CALA,CAKA;;AALA;AAAA,uBAMA,OAAA,CAAA,GAAA,CAAA,eAAA,MAAA,CAAA,SAAA,GAAA,CAAA,IAAA,OAAA,CANA;;AAAA;AAMA,gBAAA,IANA;AAOA,gBAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CAPA,CAOA;;AACA,gBAAA,KARA,GAQA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EARA;;AASA,gBAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA,KAAA,EATA,CASA;;;AAEA,gBAAA,MAAA,CAAA,SAAA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAbA;AAxBA,CAAA","sourcesContent":["<template>\n  <div class=\"container\">\n    <headerbar title=\"新鲜事\" :useAdd=\"true\"></headerbar>\n    <scrollview\n      class=\"list-content\"\n      @loadCallback=\"loadCallback\"\n      :isend=\"isend\"\n      :readyToLoad=\"readyToLoad\"\n      :dataList=\"dataList\"\n    >\n    <post v-for=\"(item) in dataList\" :key=\"item.mblog.id\" :data=\"item\" class=\"item\"></post>\n  </scrollview>\n\n    <tabbar currentKey=\"index\"></tabbar>\n  </div>\n</template>\n\n<script>\nimport tabbar from '@/components/tabbar'\nimport headerbar from '@/components/headerbar'\nimport post from '@/components/post'\nimport scrollview from '@/components/scrollview'\n\nimport service from '@/utils/service'\nexport default {\n  name: 'index',\n  components:{\n    headerbar,\n    tabbar,\n    post,\n    scrollview\n  },\n  data() {\n\n    return {\n      isend: false,\n      readyToLoad: true,\n      pageIndex: 0\n    }\n  },\n  computed: {\n    dataList () {\n      return this.$store.state.weiboDataList // 从vuex的store获取数据\n    }\n  },\n  async mounted(){\n    this.loadCallback()\n  },\n  methods:{\n    async loadCallback(){\n      if (this.pageIndex == 2) { // 加载到第二页时，就结束加载，默认只有2页数据\n        this.isend = true; // isend=true表示停止scrollview的滚动加载功能\n        return;\n      }\n      this.readyToLoad = false;// readyToLoad表示在发送ajax请求这段时间内不触发判断滚动到底部的行为\n      let resp = await service.get('json/list' + (this.pageIndex + 1) + '.json');\n      this.readyToLoad = true;// 请求发送完成后，可以正常触发滚动到底部的行为\n      let array = resp.data.cards || [];\n      this.$store.dispatch('setWeiboDataList', array); // 将加载的数据放入vuex中，便于后续的发表功能联动\n\n      this.pageIndex++;\n    }\n  }\n\n}\n</script>\n<style scoped>\n.container {\n  padding-top: 50px;\n  background-color: #fff;\n}\n.list-content {\n  padding-bottom: 60px;\n}\n.item {\n  border-bottom: 10px solid #eee;\n}\n.list-content .item:nth-last-child(2) {\n  border-bottom: 0;\n}\n</style>\n"],"sourceRoot":"src/views/index"}]}