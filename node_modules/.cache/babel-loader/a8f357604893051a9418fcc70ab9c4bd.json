{"remainingRequest":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/thread-loader/dist/cjs.js!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/babel-loader/lib/index.js!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/detail/commentlist/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/detail/commentlist/index.vue","mtime":1581689026314},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2x2bWluZy9EZXNrdG9wL3dvcmsvcGVyc29uV29yay93ZWJhcHBCb29rL3dlaWJvc291cmNlL3dlaWJvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHNjcm9sbHZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3Njcm9sbHZpZXcnOwppbXBvcnQgY2l0ZW0gZnJvbSAnLi9jaXRlbSc7CmltcG9ydCBzZXJ2aWNlIGZyb20gJ0AvdXRpbHMvc2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY29tbWVudGxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIHNjcm9sbHZpZXc6IHNjcm9sbHZpZXcsCiAgICBjaXRlbTogY2l0ZW0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc2VuZDogZmFsc2UsCiAgICAgIHJlYWR5VG9Mb2FkOiB0cnVlLAogICAgICBwYWdlSW5kZXg6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZGF0YUxpc3Q6IGZ1bmN0aW9uIGRhdGFMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY29tbWVudERhdGFMaXN0OwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLmxvYWRDYWxsYmFjaygpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZENhbGxiYWNrOiBmdW5jdGlvbiBsb2FkQ2FsbGJhY2soKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXNwLCBhcnJheTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyLnBhZ2VJbmRleCA9PSAyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOWKoOi9veWIsOesrOS6jOmhteaXtu+8jOWwsee7k+adn+WKoOi9ve+8jOm7mOiupOWPquaciTLpobXmlbDmja4KICAgICAgICAgICAgICAgIF90aGlzMi5pc2VuZCA9IHRydWU7IC8vIGlzZW5kPXRydWXooajnpLrlgZzmraJzY3JvbGx2aWV355qE5rua5Yqo5Yqg6L295Yqf6IO9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpczIucmVhZHlUb0xvYWQgPSBmYWxzZTsgLy8gcmVhZHlUb0xvYWTooajnpLrlnKjlj5HpgIFhamF46K+35rGC6L+Z5q615pe26Ze05YaF5LiN6Kem5Y+R5Yik5pat5rua5Yqo5Yiw5bqV6YOo55qE6KGM5Li6CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0KCdqc29uL2NvbW1lbnQvJyArIF90aGlzMi4kcm91dGUucGFyYW1zLmlkICsgJy5qc29uJyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzMi5yZWFkeVRvTG9hZCA9IHRydWU7IC8vIOivt+axguWPkemAgeWujOaIkOWQju+8jOWPr+S7peato+W4uOinpuWPkea7muWKqOWIsOW6lemDqOeahOihjOS4ugoKICAgICAgICAgICAgICAgIGFycmF5ID0gcmVzcC5kYXRhLmRhdGEgfHwgW107CgogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnc2V0Q29tbWVudERhdGFMaXN0JywgYXJyYXkpOyAvLyDlsIbliqDovb3nmoTmlbDmja7mlL7lhaV2dWV45Lit77yM5L6/5LqO5ZCO57ut55qE6K+E6K665Yqf6IO96IGU5YqoCgoKICAgICAgICAgICAgICAgIF90aGlzMi5wYWdlSW5kZXgrKzsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAgBA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,OAAA,MAAA,iBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA,UADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AAEA,WAAA;AACA,MAAA,KAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GAbA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,eAAA;AACA;AAHA,GAdA;AAmBA,EAAA,OAnBA,qBAmBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,YAAA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,MAAA,CAAA,SAAA,IAAA,CADA;AAAA;AAAA;AAAA;;AACA;AACA,gBAAA,MAAA,CAAA,KAAA,GAAA,IAAA,CAFA,CAEA;;AAFA;;AAAA;AAKA,gBAAA,MAAA,CAAA,WAAA,GAAA,KAAA,CALA,CAKA;;AALA;AAAA,uBAMA,OAAA,CAAA,GAAA,CAAA,kBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,GAAA,OAAA,CANA;;AAAA;AAMA,gBAAA,IANA;AAOA,gBAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CAPA,CAOA;;AACA,gBAAA,KARA,GAQA,IAAA,CAAA,IAAA,CAAA,IAAA,IAAA,EARA;;AASA,gBAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,KAAA,EATA,CASA;;;AACA,gBAAA,MAAA,CAAA,SAAA;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAZA;AAtBA,CAAA","sourcesContent":["<template>\n  <scrollview\n    @loadCallback=\"loadCallback\"\n    :isend=\"isend\"\n    :readyToLoad=\"readyToLoad\"\n    :dataList=\"dataList\"\n  >\n    <div class=\"content-list\">\n      <citem v-for=\"(item,index) in dataList\" :key=\"index\" :data=\"item\"></citem>\n    </div>\n  </scrollview>\n</template>\n\n<script>\n\n\nimport scrollview from '@/components/scrollview'\nimport citem from './citem'\nimport service from '@/utils/service'\nexport default {\n  name: 'commentlist',\n  components:{\n    scrollview,\n    citem\n  },\n  data() {\n\n    return {\n      isend: false,\n      readyToLoad: true,\n      pageIndex: 0\n    }\n  },\n  computed: {\n    dataList(){\n      return this.$store.state.commentDataList\n    }\n  },\n  async mounted(){\n    this.loadCallback()\n  },\n  methods:{\n    async loadCallback () {\n      if (this.pageIndex == 2) {// 加载到第二页时，就结束加载，默认只有2页数据\n        this.isend = true// isend=true表示停止scrollview的滚动加载功能\n        return\n      }\n      this.readyToLoad = false// readyToLoad表示在发送ajax请求这段时间内不触发判断滚动到底部的行为\n      let resp = await service.get('json/comment/' + this.$route.params.id + '.json')\n      this.readyToLoad = true// 请求发送完成后，可以正常触发滚动到底部的行为\n      let array = resp.data.data || []\n      this.$store.dispatch('setCommentDataList', array)// 将加载的数据放入vuex中，便于后续的评论功能联动\n      this.pageIndex++\n    }\n  }\n\n}\n</script>\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views/detail/commentlist"}]}