{"remainingRequest":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue","mtime":1581481380591},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YWJiYXIgZnJvbSAnQC9jb21wb25lbnRzL3RhYmJhcicKaW1wb3J0IGhlYWRlcmJhciBmcm9tICdAL2NvbXBvbmVudHMvaGVhZGVyYmFyJwppbXBvcnQgcG9zdCBmcm9tICdAL2NvbXBvbmVudHMvcG9zdCcKaW1wb3J0IHNjcm9sbHZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3Njcm9sbHZpZXcnCgppbXBvcnQgc2VydmljZSBmcm9tICdAL3V0aWxzL3NlcnZpY2UnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaW5kZXgnLAogIGNvbXBvbmVudHM6ewogICAgaGVhZGVyYmFyLAogICAgdGFiYmFyLAogICAgcG9zdCwKICAgIHNjcm9sbHZpZXcKICB9LAogIGRhdGEoKSB7CgogICAgcmV0dXJuIHsKICAgICAgaXNlbmQ6IGZhbHNlLAogICAgICByZWFkeVRvTG9hZDogdHJ1ZSwKICAgICAgcGFnZUluZGV4OiAwCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZGF0YUxpc3QgKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUud2VpYm9EYXRhTGlzdCAvLyDku452dWV455qEc3RvcmXojrflj5bmlbDmja4KICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKXsKICAgIHRoaXMubG9hZENhbGxiYWNrKCkKICB9LAogIG1ldGhvZHM6ewogICAgYXN5bmMgbG9hZENhbGxiYWNrKCl7CiAgICAgIGlmICh0aGlzLnBhZ2VJbmRleCA9PSAyKSB7IC8vIOWKoOi9veWIsOesrOS6jOmhteaXtu+8jOWwsee7k+adn+WKoOi9ve+8jOm7mOiupOWPquaciTLpobXmlbDmja4KICAgICAgICB0aGlzLmlzZW5kID0gdHJ1ZTsgLy8gaXNlbmQ9dHJ1ZeihqOekuuWBnOatonNjcm9sbHZpZXfnmoTmu5rliqjliqDovb3lip/og70KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5yZWFkeVRvTG9hZCA9IGZhbHNlOy8vIHJlYWR5VG9Mb2Fk6KGo56S65Zyo5Y+R6YCBYWpheOivt+axgui/meauteaXtumXtOWGheS4jeinpuWPkeWIpOaWrea7muWKqOWIsOW6lemDqOeahOihjOS4ugogICAgICBsZXQgcmVzcCA9IGF3YWl0IHNlcnZpY2UuZ2V0KCdqc29uL2xpc3QnICsgKHRoaXMucGFnZUluZGV4ICsgMSkgKyAnLmpzb24nKTsKICAgICAgdGhpcy5yZWFkeVRvTG9hZCA9IHRydWU7Ly8g6K+35rGC5Y+R6YCB5a6M5oiQ5ZCO77yM5Y+v5Lul5q2j5bi46Kem5Y+R5rua5Yqo5Yiw5bqV6YOo55qE6KGM5Li6CiAgICAgIGxldCBhcnJheSA9IHJlc3AuZGF0YS5jYXJkcyB8fCBbXTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFdlaWJvRGF0YUxpc3QnLCBhcnJheSk7IC8vIOWwhuWKoOi9veeahOaVsOaNruaUvuWFpXZ1ZXjkuK3vvIzkvr/kuo7lkI7nu63nmoTlj5Hooajlip/og73ogZTliqgKCiAgICAgIHRoaXMucGFnZUluZGV4Kys7CiAgICB9CiAgfQoKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <div class=\"container\">\n    <headerbar title=\"新鲜事\" :useAdd=\"true\"></headerbar>\n    <scrollview\n      class=\"list-content\"\n      @loadCallback=\"loadCallback\"\n      :isend=\"isend\"\n      :readyToLoad=\"readyToLoad\"\n      :dataList=\"dataList\"\n    >\n    <post v-for=\"(item) in dataList\" :key=\"item.mblog.id\" :data=\"item\" class=\"item\"></post>\n  </scrollview>\n\n    <tabbar currentKey=\"index\"></tabbar>\n  </div>\n</template>\n\n<script>\nimport tabbar from '@/components/tabbar'\nimport headerbar from '@/components/headerbar'\nimport post from '@/components/post'\nimport scrollview from '@/components/scrollview'\n\nimport service from '@/utils/service'\nexport default {\n  name: 'index',\n  components:{\n    headerbar,\n    tabbar,\n    post,\n    scrollview\n  },\n  data() {\n\n    return {\n      isend: false,\n      readyToLoad: true,\n      pageIndex: 0\n    }\n  },\n  computed: {\n    dataList () {\n      return this.$store.state.weiboDataList // 从vuex的store获取数据\n    }\n  },\n  async mounted(){\n    this.loadCallback()\n  },\n  methods:{\n    async loadCallback(){\n      if (this.pageIndex == 2) { // 加载到第二页时，就结束加载，默认只有2页数据\n        this.isend = true; // isend=true表示停止scrollview的滚动加载功能\n        return;\n      }\n      this.readyToLoad = false;// readyToLoad表示在发送ajax请求这段时间内不触发判断滚动到底部的行为\n      let resp = await service.get('json/list' + (this.pageIndex + 1) + '.json');\n      this.readyToLoad = true;// 请求发送完成后，可以正常触发滚动到底部的行为\n      let array = resp.data.cards || [];\n      this.$store.dispatch('setWeiboDataList', array); // 将加载的数据放入vuex中，便于后续的发表功能联动\n\n      this.pageIndex++;\n    }\n  }\n\n}\n</script>\n<style scoped>\n.container {\n  padding-top: 50px;\n  background-color: #fff;\n}\n.list-content {\n  padding-bottom: 60px;\n}\n.item {\n  border-bottom: 10px solid #eee;\n}\n.list-content .item:nth-last-child(2) {\n  border-bottom: 0;\n}\n</style>\n"]}]}