{"remainingRequest":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue?vue&type=style&index=0&id=498142aa&scoped=true&lang=css&","dependencies":[{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/index/index.vue","mtime":1581481380591},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXIgewogIHBhZGRpbmctdG9wOiA1MHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KLmxpc3QtY29udGVudCB7CiAgcGFkZGluZy1ib3R0b206IDYwcHg7Cn0KLml0ZW0gewogIGJvcmRlci1ib3R0b206IDEwcHggc29saWQgI2VlZTsKfQoubGlzdC1jb250ZW50IC5pdGVtOm50aC1sYXN0LWNoaWxkKDIpIHsKICBib3JkZXItYm90dG9tOiAwOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <div class=\"container\">\n    <headerbar title=\"新鲜事\" :useAdd=\"true\"></headerbar>\n    <scrollview\n      class=\"list-content\"\n      @loadCallback=\"loadCallback\"\n      :isend=\"isend\"\n      :readyToLoad=\"readyToLoad\"\n      :dataList=\"dataList\"\n    >\n    <post v-for=\"(item) in dataList\" :key=\"item.mblog.id\" :data=\"item\" class=\"item\"></post>\n  </scrollview>\n\n    <tabbar currentKey=\"index\"></tabbar>\n  </div>\n</template>\n\n<script>\nimport tabbar from '@/components/tabbar'\nimport headerbar from '@/components/headerbar'\nimport post from '@/components/post'\nimport scrollview from '@/components/scrollview'\n\nimport service from '@/utils/service'\nexport default {\n  name: 'index',\n  components:{\n    headerbar,\n    tabbar,\n    post,\n    scrollview\n  },\n  data() {\n\n    return {\n      isend: false,\n      readyToLoad: true,\n      pageIndex: 0\n    }\n  },\n  computed: {\n    dataList () {\n      return this.$store.state.weiboDataList // 从vuex的store获取数据\n    }\n  },\n  async mounted(){\n    this.loadCallback()\n  },\n  methods:{\n    async loadCallback(){\n      if (this.pageIndex == 2) { // 加载到第二页时，就结束加载，默认只有2页数据\n        this.isend = true; // isend=true表示停止scrollview的滚动加载功能\n        return;\n      }\n      this.readyToLoad = false;// readyToLoad表示在发送ajax请求这段时间内不触发判断滚动到底部的行为\n      let resp = await service.get('json/list' + (this.pageIndex + 1) + '.json');\n      this.readyToLoad = true;// 请求发送完成后，可以正常触发滚动到底部的行为\n      let array = resp.data.cards || [];\n      this.$store.dispatch('setWeiboDataList', array); // 将加载的数据放入vuex中，便于后续的发表功能联动\n\n      this.pageIndex++;\n    }\n  }\n\n}\n</script>\n<style scoped>\n.container {\n  padding-top: 50px;\n  background-color: #fff;\n}\n.list-content {\n  padding-bottom: 60px;\n}\n.item {\n  border-bottom: 10px solid #eee;\n}\n.list-content .item:nth-last-child(2) {\n  border-bottom: 0;\n}\n</style>\n"]}]}