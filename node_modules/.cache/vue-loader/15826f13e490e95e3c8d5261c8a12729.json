{"remainingRequest":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/repost/index.vue?vue&type=style&index=0&id=979029a0&scoped=true&lang=css&","dependencies":[{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/src/views/repost/index.vue","mtime":1584098268001},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvming/Desktop/work/personWork/webappBook/weibosource/weibo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXIgewogIHBvc2l0aW9uOiBmaXhlZDsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwogIGJvdHRvbTogMDsKICB0b3A6IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQojcG9zdENvbnRlbnQgewogIG1hcmdpbi10b3A6IDQ1cHg7CiAgYm9yZGVyOiBub25lOwogIGZvbnQtc2l6ZTogMTZweDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDIwMHB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLnRleHQtY291bnQgewogIGZvbnQtc2l6ZTogMTRweDsKICBjb2xvcjogIzcwNzA3MDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDIwcHg7CiAgdG9wOiAyMzBweDsKfQoucmVwb3N0LWluZm8gewogIGRpc3BsYXk6IGZsZXg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsKfQoubGVmdC1pbWFnZSB7CiAgd2lkdGg6IDg0cHg7CiAgaGVpZ2h0OiA4NHB4OwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7Cn0KLnJpZ2h0LWluZm8gewogIGZsZXg6IDFweDsKICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIHBhZGRpbmctcmlnaHQ6IDEwcHg7Cn0KLm5pY2tuYW1lIHsKICBjb2xvcjogIzMzMzsKICBmb250LXNpemU6IDE0cHg7Cn0KLnJlcG9zdC1jb250ZW50IHsKICBjb2xvcjogIzkzOTM5MzsKICBmb250LXNpemU6IDEzcHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/repost","sourcesContent":["<template>\n  <div class=\"container\">\n    <headerbar useRightBtn=\"提交\" :useBack=\"true\" title=\"转发微博\" @rightBtnClick=\"doRepost\"></headerbar>\n    <textarea id=\"postContent\"\n      maxlength=\"300\"\n      placeholder=\"请输入文字...\"\n      @input=\"oninput\"\n      v-model=\"postContent\"></textarea>\n    <div class=\"text-count\"><span class=\"left-count\">{{textCount}}</span>/300</div>\n    <div class=\"repost-info\" v-if=\"toRepostData\">\n      <div v-if=\"toRepostData.pics.length\" class=\"left-image\" :style=\"imgStyle(toRepostData.pics[0].url)\">\n      </div>\n      <div class=\"right-info\">\n        <div class=\"nickname\">\n          @{{toRepostData.user.screen_name}}\n        </div>\n        <div class=\"repost-content two-line\" v-html=\"formatText(toRepostData.text)\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport headerbar from '@/components/headerbar'\nexport default {\n  name: 'repost',\n  components:{\n    headerbar\n  },\n  data(){\n    return {\n      postContent: '',\n      textCount: 0,\n      imageList: []\n    }\n  },\n  computed: {\n    imgStyle () {\n      return url => {\n        return {\n          backgroundImage: 'url(' + url + ')'\n        }\n      }\n    },\n    currentUser(){\n      return this.$store.state.currentUser\n    },\n    toRepostData(){\n      if (this.$store.state.toRepostData) {\n        return this.$store.state.toRepostData.mblog\n      }\n\n      return null\n      \n    }\n  },\n  methods:{\n    oninput(){\n      this.textCount = this.postContent.length\n    },\n\n    doRepost(){\n      let obj = {\n        mblog: {\n          id: Date.now(),\n          attitides_count: 0,\n          reposts_count: 0,\n          comments_count: 0,\n          source: '微博mobile版',\n          text: this.postContent,\n          pics:[],\n          retweeted_status: this.toRepostData,\n          user: {\n            screen_name: this.currentUser.screen_name,\n            profile_image_url: this.currentUser.profile_image_url,\n            badge:{\n              user_name_certificate: this.currentUser.verified\n            }\n          }\n        }\n      }\n\n      this.$store.dispatch('addPost',obj)\n      mui.toast('转发成功')\n      this.$router.back()\n    },\n    formatText(value){\n      // 过滤链接中可能引发跳转的逻辑\n      let reg = /href=(\"|')(.+?)(\"|')/gi;\n\n      return value.replace(reg, '').replace(/<br \\/><br \\/>/g, '<br />')\n    }\n  }\n\n}\n</script>\n<style scoped>\n.container {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background-color: #fff;\n}\n#postContent {\n  margin-top: 45px;\n  border: none;\n  font-size: 16px;\n  width: 100%;\n  height: 200px;\n  box-sizing: border-box;\n}\n.text-count {\n  font-size: 14px;\n  color: #707070;\n  position: absolute;\n  right: 20px;\n  top: 230px;\n}\n.repost-info {\n  display: flex;\n  background-color: #f7f7f7;\n}\n.left-image {\n  width: 84px;\n  height: 84px;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n.right-info {\n  flex: 1px;\n  padding-left: 10px;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  padding-right: 10px;\n}\n.nickname {\n  color: #333;\n  font-size: 14px;\n}\n.repost-content {\n  color: #939393;\n  font-size: 13px;\n}\n</style>\n"]}]}