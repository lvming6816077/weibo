(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["comment"],{"58f6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("headerbar",{attrs:{useRightBtn:"提交",useBack:!0,title:"评论微博"},on:{rightBtnClick:e.submit}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.postContent,expression:"postContent"}],attrs:{id:"postContent",maxlength:"30",placeholder:"请输入文字..."},domProps:{value:e.postContent},on:{input:[function(t){t.target.composing||(e.postContent=t.target.value)},e.oninput]}}),s("div",{staticClass:"text-count"},[s("span",{staticClass:"left-count"},[e._v(e._s(e.textCount))]),e._v("/30")]),s("div",{staticClass:"selected-images"},[e._l(e.imageList,(function(t,i){return s("div",{key:i,staticClass:"image-item",style:e.imgStyle(t)},[s("div",{staticClass:"delete-icon",on:{click:function(t){return e.deleteImage(i)}}})])})),0==e.imageList.length?s("div",{staticClass:"plus-image",on:{click:e.openFileUploader}}):e._e()],2),s("input",{ref:"fileUploader",attrs:{type:"file",id:"fileUploader",accept:"image/*",multiple:"multiple"},on:{change:e.fileChange}}),s("div",{staticClass:"repost-content"},[s("div",{staticClass:"mui-checkbox repost-btn"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isRepost,expression:"isRepost"}],staticClass:"repost-checkbox",attrs:{value:"",type:"checkbox"},domProps:{checked:Array.isArray(e.isRepost)?e._i(e.isRepost,"")>-1:e.isRepost},on:{change:function(t){var s=e.isRepost,i=t.target,a=!!i.checked;if(Array.isArray(s)){var n="",r=e._i(s,n);i.checked?r<0&&(e.isRepost=s.concat([n])):r>-1&&(e.isRepost=s.slice(0,r).concat(s.slice(r+1)))}else e.isRepost=a}}})]),s("div",{staticClass:"repost-text"},[e._v("同时转发")])])],1)},a=[],n=(s("a434"),s("ac1f"),s("5319"),s("1c80")),r={name:"comment",components:{headerbar:n["a"]},data:function(){return{postContent:"",textCount:0,imageList:[],isRepost:!1}},computed:{imgStyle:function(){return function(e){return{backgroundImage:"url("+e.base64+")"}}},currentUser:function(){return this.$store.state.currentUser},toRepostData:function(){return this.$store.state.toRepostData?this.$store.state.toRepostData.mblog:null}},methods:{oninput:function(){this.textCount=this.postContent.length},openFileUploader:function(){0==this.imageList.length&&this.$refs.fileUploader.click()},fileChange:function(e){for(var t=this,s=e.target.files,i=0;i<s.length;i++){var a=new FileReader;a.readAsDataURL(s[i]),a.onload=function(e){var s=new Image;s.onload=function(){t.imageList.push({base64:e.target.result,width:s.width,height:s.height})},s.src=e.target.result}}e.target.value=null},deleteImage:function(e){this.imageList.splice(e,1)},submit:function(){var e=this.postContent,t=Date.now();if(this.imageList.length>0){var s='<a data-preview-src="$$src" data-preview-group="$$id"><span class="surl-text">评论配图</span></a>';s=s.replace("$$src",this.imageList[0].base64).replace("$$id",t),e+=s}var i={created_at:Date.now(),id:t,like_count:0,text:e,more_info_users:[],user:{screen_name:this.currentUser.screen_name,profile_image_url:this.currentUser.profile_image_url,badge:{user_name_certificate:this.currentUser.verified}}};this.$store.dispatch("addComment",i),mui.toast("评论成功"),this.isRepost&&this.doRepost(),this.$router.back()},doRepost:function(){var e={mblog:{id:Date.now(),attitides_count:0,reposts_count:0,comments_count:0,source:"微博mobile版",text:this.postContent,pics:[],retweeted_status:this.toRepostData,user:{screen_name:this.currentUser.screen_name,profile_image_url:this.currentUser.profile_image_url,badge:{user_name_certificate:this.currentUser.verified}}}};this.$store.dispatch("addPost",e)}}},o=r,c=(s("f93e"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,"4b62e28d",null);t["default"]=l.exports},"9c57":function(e,t,s){},a434:function(e,t,s){"use strict";var i=s("23e7"),a=s("23cb"),n=s("a691"),r=s("50c4"),o=s("7b0b"),c=s("65f0"),l=s("8418"),u=s("1dde"),p=s("ae40"),d=u("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var s,i,u,p,d,m,_=o(this),C=r(_.length),b=a(e,C),R=arguments.length;if(0===R?s=i=0:1===R?(s=0,i=C-b):(s=R-2,i=f(h(n(t),0),C-b)),C+s-i>g)throw TypeError(v);for(u=c(_,i),p=0;p<i;p++)d=b+p,d in _&&l(u,p,_[d]);if(u.length=i,s<i){for(p=b;p<C-i;p++)d=p+i,m=p+s,d in _?_[m]=_[d]:delete _[m];for(p=C;p>C-i+s;p--)delete _[p-1]}else if(s>i)for(p=C-i;p>b;p--)d=p+i-1,m=p+s-1,d in _?_[m]=_[d]:delete _[m];for(p=0;p<s;p++)_[p+b]=arguments[p+2];return _.length=C-i+s,u}})},f93e:function(e,t,s){"use strict";var i=s("9c57"),a=s.n(i);a.a}}]);
//# sourceMappingURL=comment.bc071632.js.map